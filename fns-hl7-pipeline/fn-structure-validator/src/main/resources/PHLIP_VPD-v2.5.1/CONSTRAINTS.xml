<ConformanceContext xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/Jungyubw/NIST_healthcare_hl7_v2_profile_schema/master/Schema/NIST%20Validation%20Schema/ConformanceContext.xsd" UUID="62aa3e2a-0d3a-43d6-98c9-a040a4ca2da7">
    <MetaData Name="PHLIP VPD 2.5.1 Implementation Guide" OrgName="No Org Info" Version="2.5.1" Date="No Date Info" />
    <Predicates>
        <Datatype>
            <ByID ID="XON_R">
                <Predicate Target="1[1]" TrueUsage="R" FalseUsage="RE">
                    <Description>If XON.10 (Organization Identifier) is not valued </Description>
                    <Condition>
                        <NOT>
                            <Presence Path="10[1]" />
                        </NOT>
                    </Condition>
                </Predicate>
            </ByID>
        </Datatype>
        <Segment />
        <Group />
        <Message />
    </Predicates>
    <Constraints>
        <Datatype>
            <ByID ID="XCN_C">
                <Constraint ID="OBR-16-2.1" Strength="SHOULD">
                    <Description>If XCN.1 (ID Number) is not valued then XCN.2.1 (Surname) should not be empty.</Description>
                    <Assertion>
                        <IMPLY>
                            <NOT>
                                <Presence Path="1[1]" />
                            </NOT>
                            <Format Path="2[1].1[1]" Regex="^(?!\s*$).+" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="EI_D">
                <Constraint ID="EI-4" Strength="SHOULD">
                    <Description>EI.4 (Universal ID Type) should contain the value 'ISO'.</Description>
                    <Assertion>
                        <PlainText Path="4[1]" Text="ISO" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="DTM_M">
                <Constraint ID="DTM_M_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'YYYYMMDDHHMM[SS[.S[S[S[S]]]]][+/-ZZZZ]'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{12}|\d{14}|\d{14}\.\d|\d{14}\.\d{2}|\d{14}\.\d{3}|\d{14}\.\d{4})([+-]\d{4})?$" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="DTM_MSTZR">
                <Constraint ID="DTM_MSTZR_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'YYYYMMDDHHMMSS.SSS[S]+/-ZZZZ'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{14}\.\d{3}|\d{14}\.\d{4})([+-]\d{4})$" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="HD_MSH5">
                <Constraint ID="HD-3-ISO" Strength="SHOULD">
                    <Description>HD.3 (Universal ID Type) should contain the value 'ISO'.</Description>
                    <Assertion>
                        <PlainText Path="3[1]" Text="ISO" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="SN_M">
                <Constraint ID="SN-1-Values" Strength="SHALL">
                    <Description>If SN.1 (Comparator) is valued then SN.1 (Comparator) shall contain one of the following values: '&lt;=', '&gt;=', '&lt;&gt;', '&lt;', '&gt;', '='.</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="1[1]" />
                            <Format Path="1[1]" Regex="^&lt;=$|^&gt;=$|^&lt;&gt;$|^&lt;$|^&gt;$|^=$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="SN-3-Values" Strength="SHALL">
                    <Description>If SN.3 (Separator/Suffix) is valued then SN.3 (Separator/Suffix) shall contain one of the of the following values: '+', '-', '/', '.', ':'.</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="3[1]" />
                            <Format Path="3[1]" Regex="^[-+\/.:]$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="DT">
                <Constraint ID="DT_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'YYYY[MM[DD]]'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{4}|\d{6}|\d{8})$" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="CWE_v9O_2-9">
                <Constraint ID="CWE-3-LN" Strength="SHOULD">
                    <Description>If CWE.3 (Name of Coding System) contains the value 'LN', then CWE.1 (Identifier) should be a LOINC code'.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="3[1]" Text="LN" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="1[1]" Regex="^\d{3,8}-\d$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="HD_RE">
                <Constraint ID="CLIA" Strength="SHALL">
                    <Description>If HD.3 (Universal ID Type) contains the value 'CLIA', then HD.2 (Universal ID) shall be a CLIA identifier.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="3[1]" Text="CLIA" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="2[1]" Regex="^\d{2}D\d{7}$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="ISO" Strength="SHALL">
                    <Description>If HD.3 (Universal ID Type) contains the value 'ISO', then HD.2 (Universal ID) shall be valued with an ISO-compliant OID.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="3[1]" Text="ISO" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="2[1]" Regex="[0-2](\.(0|[1-9][0-9]*))*" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH3or4IDType" Strength="SHALL">
                    <Description>HD.3 (Universal ID Type) shall contain one of the values in the list: ['ISO','CLIA'].</Description>
                    <Assertion>
                        <StringList Path="3[1]" CSV="ISO,CLIA" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="XON_M">
                <Constraint ID="XON-3-NotSupported" Strength="SHOULD">
                    <Description>XON.3 (ID Number) should be empty.</Description>
                    <Assertion>
                        <Format Path="3[1]" Regex="^$" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="HD_M">
                <Constraint ID="HD-3-ISO" Strength="SHOULD">
                    <Description>HD.3 (Universal ID Type) should contain the value 'ISO'.</Description>
                    <Assertion>
                        <PlainText Path="3[1]" Text="ISO" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="DTM_D">
                <Constraint ID="DTM_D_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'YYYYMMDD[HH[MM[SS[.S[S[S[S]]]]]]][+/-ZZZZ]'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{8}|\d{10}|\d{12}|\d{14}|\d{14}\.\d|\d{14}\.\d{2}|\d{14}\.\d{3}|\d{14}\.\d{4})([+-]\d{4})?$" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="DTM">
                <Constraint ID="DTM_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'YYYY[MM[DD[HH[MM[SS[.S[S[S[S]]]]]]]]][+/-ZZZZ]'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{4}|\d{6}|\d{8}|\d{10}|\d{12}|\d{14}|\d{14}\.\d|\d{14}\.\d{2}|\d{14}\.\d{3}|\d{14}\.\d{4})([+-]\d{4})?$" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="XON_R">
                <Constraint ID="XON-7-Usage" Strength="SHOULD">
                    <Description>If XON.10 (Organization Identifier) is valued then XON.7 (Identifier Type Code) should contain the value 'XX'.</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="10[1]" />
                            <PlainText Path="7[1]" Text="XX" IgnoreCase="false" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="TM">
                <Constraint ID="TM_DateTimeConstraint">
                    <Description>The value SHALL follow the Date/Time pattern 'HH[MM[SS[.S[S[S[S]]]]]][+/-ZZZZ]'.</Description>
                    <Assertion>
                        <Format Path="." Regex="^(\d{2}|\d{4}|\d{6}|\d{6}\.\d|\d{6}\.\d{2}|\d{6}\.\d{3}|\d{6}\.\d{4})([+-]\d{4})?$" />
                    </Assertion>
                </Constraint>
            </ByID>
        </Datatype>
        <Segment>
            <ByID ID="MSH_D">
                <Constraint ID="MSH-21[2].1" Strength="SHALL">
                    <Description>The second occurrence of MSH-21.1 (Entity Identifier) shall contain the value 'VPD_Version_1.0'.</Description>
                    <Assertion>
                        <PlainText Path="21[2].1[1]" Text="VPD_Version_1.0" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-11-P" Strength="SHALL">
                    <Description>If MSH-11.1 (Processing ID) contains the value 'P', then MSH-3.1 (Namespace ID) shall contain the value 'Prod' (case insensitive)'.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="11[1].1[1]" Text="P" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="3[1].1[1]" Regex="^.*(P[rR][oO][dD]).*$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-11-T" Strength="SHALL">
                    <Description>If MSH-11.1 (Processing ID) contains the value 'T', then MSH-3.1 (Namespace ID) shall contain the value 'Stag' or 'Dev' (case insensitive)'.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="11[1].1[1]" Text="T" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="3[1].1[1]" Regex="^.*(S[tT][aA][gG]|D[eE][vV]).*$" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-8-NotSupported" Strength="SHOULD">
                    <Description>MSH-8 (Security) should be empty.</Description>
                    <Assertion>
                        <Format Path="8[1]" Regex="^$" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-2" Strength="SHALL">
                    <Description>( MSH-2 (Encoding Characters) shall contain the value '^~\&amp;', OR MSH-2 (Encoding Characters) shall contain the value '^~\&amp;#'. )</Description>
                    <Assertion>
                        <OR>
                            <PlainText Path="2[1]" Text="^~\&amp;#" IgnoreCase="false" NotPresentBehavior="PASS" />
                            <PlainText Path="2[1]" Text="^~\&amp;" IgnoreCase="false" NotPresentBehavior="PASS" />
                        </OR>
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-21[1].1" Strength="SHALL">
                    <Description>The first occurrence of MSH-21.1 (Entity Identifier) shall contain the value 'PHLabReport-NoAck'.</Description>
                    <Assertion>
                        <PlainText Path="21[1].1[1]" Text="PHLabReport-NoAck" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-3.2" Strength="SHALL">
                    <Description>MSH-3.2 (Universal ID) shall contain one of the values in the list: ['2.16.840.1.114222.4.3.3.2.3.2','2.16.840.1.114222.4.3.3.2.3.1','2.16.840.1.113883.3.1833.2','2.16.840.1.114222.4.3.3.2.17.2','2.16.840.1.114222.4.3.3.2.17.1','2.16.840.1.114222.4.3.3.2.8.2','2.16.840.1.114222.4.3.3.2.8.1','2.16.840.1.114222.4.3.3.2.35.2','2.16.840.1.114222.4.3.3.2.35.1'].</Description>
                    <Assertion>
                        <StringList Path="3[1].2[1]" CSV="2.16.840.1.114222.4.3.3.2.3.2,2.16.840.1.114222.4.3.3.2.3.1,2.16.840.1.113883.3.1833.2,2.16.840.1.114222.4.3.3.2.17.2,2.16.840.1.114222.4.3.3.2.17.1,2.16.840.1.114222.4.3.3.2.8.2,2.16.840.1.114222.4.3.3.2.8.1,2.16.840.1.114222.4.3.3.2.35.2,2.16.840.1.114222.4.3.3.2.35.1" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
                <Constraint ID="MSH-4.2" Strength="SHALL">
                    <Description>MSH-4.2 (Universal ID) shall contain one of the values in the list: ['2.16.840.1.114222.4.1.10765','2.16.840.1.114222.4.1.10080','2.16.840.1.114222.4.1.131913','2.16.840.1.114222.4.1.209842','2.16.840.1.114222.4.1.10100'].</Description>
                    <Assertion>
                        <StringList Path="4[1].2[1]" CSV="2.16.840.1.114222.4.1.10765,2.16.840.1.114222.4.1.10080,2.16.840.1.114222.4.1.131913,2.16.840.1.114222.4.1.209842,2.16.840.1.114222.4.1.10100" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="SPM_D">
                <Constraint ID="SPM-17.1-Required" Strength="SHOULD">
                    <Description>SPM-17.1.1 (Time) should not contain the value '0000'.</Description>
                    <Assertion>
                        <NOT>
                            <PlainText Path="17[1].1[1].1[1]" Text="0000" IgnoreCase="false" NotPresentBehavior="PASS" />
                        </NOT>
                    </Assertion>
                </Constraint>
                <Constraint ID="SPM-24.3-Value" Strength="SHOULD">
                    <Description>If SPM-24.1 (Identifier) is valued then SPM-24.3 (Name of Coding System) should contain the value 'HL70493'.</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="24[1].1[1]" />
                            <PlainText Path="24[1].3[1]" Text="HL70493" IgnoreCase="false" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="OBX_D">
                <Constraint ID="OBX-6-Usage" Strength="SHOULD">
                    <Description>If ( OBX-2 (Value Type) contains one of the values in the list: ['SN','NM'], AND OBX-11 (Observation Result Status) does not contain the value 'X'. ) then ( OBX-6.4 (Alternate Identifier) should not be empty, OR OBX-6.1 (Identifier) should not be empty. )</Description>
                    <Assertion>
                        <IMPLY>
                            <AND>
                                <StringList Path="2[1]" CSV="SN,NM" IgnoreCase="false" NotPresentBehavior="FAIL" />
                                <NOT>
                                    <PlainText Path="11[1]" Text="X" IgnoreCase="false" NotPresentBehavior="FAIL" />
                                </NOT>
                            </AND>
                            <OR>
                                <Format Path="6[1].4[1]" Regex="^(?!\s*$).+" NotPresentBehavior="FAIL" />
                                <Format Path="6[1].1[1]" Regex="^(?!\s*$).+" NotPresentBehavior="FAIL" />
                            </OR>
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="OBX-11-Values" Strength="SHOULD">
                    <Description>OBX-11 (Observation Result Status) should contain one of the values in the list: ['F','C','X'].</Description>
                    <Assertion>
                        <StringList Path="11[1]" CSV="F,C,X" IgnoreCase="false" NotPresentBehavior="PASS" />
                    </Assertion>
                </Constraint>
                <Constraint ID="OBX-2-Usage" Strength="SHALL">
                    <Description>If ( OBX-11 (Observation Result Status) does not contain the value 'X', AND At least one occurrence of OBX-5 (Observation Value) is valued ) then OBX-2 (Value Type) shall not be empty.</Description>
                    <Assertion>
                        <IMPLY>
                            <AND>
                                <Presence Path="5[*]" />
                                <NOT>
                                    <PlainText Path="11[1]" Text="X" IgnoreCase="false" NotPresentBehavior="FAIL" />
                                </NOT>
                            </AND>
                            <Format Path="2[1]" Regex="^(?!\s*$).+" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="OBX-8-Usage" Strength="SHOULD">
                    <Description>If ( All occurrences of OBX-5 (Observation Value) are not valued AND OBX-11 (Observation Result Status) does not contain the value 'X'. ) then at least one occurrence of OBX-8.1 (Identifier) should not be empty.</Description>
                    <Assertion>
                        <IMPLY>
                            <AND>
                                <NOT>
                                    <Presence Path="5[*]" />
                                </NOT>
                                <NOT>
                                    <PlainText Path="11[1]" Text="X" IgnoreCase="false" NotPresentBehavior="FAIL" />
                                </NOT>
                            </AND>
                            <Format Path="8[*].1[1]" Regex="^(?!\s*$).+" AtLeastOnce="true" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="PID_D">
                <Constraint ID="PID-5[2].7" Strength="SHALL">
                    <Description>If The first occurrence of PID-5.1 (Family Name) is not valued then the second occurrence of PID-5.7 (Name Type Code) shall contain one of the values in the list: ['S','U'].</Description>
                    <Assertion>
                        <IMPLY>
                            <NOT>
                                <Presence Path="5[1].1[1]" />
                            </NOT>
                            <StringList Path="5[2].7[1]" CSV="S,U" IgnoreCase="false" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="PID-30-Value" Strength="SHOULD">
                    <Description>If PID-29 (Patient Death Date and Time) is valued then PID-30 (Patient Death Indicator) should contain the value 'Y'.</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="29[1]" />
                            <PlainText Path="30[1]" Text="Y" IgnoreCase="false" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
        </Segment>
        <Group>
            <ByID ID="648738388b87bc00074ba4e8-3.2.6">
                <Constraint ID="OBX-Sequential" Strength="SHOULD">
                    <Description>PATIENT_RESULT.ORDER_OBSERVATION.OBSERVATION.OBX-1 (Set ID - OBX) should be valued sequentially starting with the value '1'.</Description>
                    <Assertion>
                        <SetID Path="1[1].1[1]" />
                    </Assertion>
                </Constraint>
            </ByID>
            <ByID ID="648738388b87bc00074ba4e8-3.2">
                <Constraint ID="SPM-17.1-Value" Strength="SHOULD">
                    <Description>If At least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.SPECIMEN.SPM-17.1.1 (Time) is valued then at least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.SPECIMEN.SPM-17.1.1 (Time) should be identical to PATIENT_RESULT.ORDER_OBSERVATION.OBR-7 (Observation Date/Time)</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="9[*].1[1].17[1].1[1].1[1]" />
                            <PathValue Path1="9[*].1[1].17[1].1[1].1[1]" Operator="EQ" Path2="2[1].7[1]" NotPresentBehavior="FAIL" Truncated="false" IdenticalEquality="true" Path1Mode="AtLeastOne" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="OBX-14-Value" Strength="SHOULD">
                    <Description>If At least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.OBSERVATION.OBX-14 (Date/Time of the Observation) is valued then at least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.OBSERVATION.OBX-14 (Date/Time of the Observation) should be identical to PATIENT_RESULT.ORDER_OBSERVATION.OBR-7 (Observation Date/Time)</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="6[*].1[1].14[1]" />
                            <PathValue Path1="6[*].1[1].14[1]" Operator="EQ" Path2="2[1].7[1]" NotPresentBehavior="FAIL" Truncated="false" IdenticalEquality="true" Path1Mode="AtLeastOne" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="SPM-17.2-Value" Strength="SHOULD">
                    <Description>If At least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.SPECIMEN.SPM-17.2.1 (Time) is valued then at least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.SPECIMEN.SPM-17.2.1 (Time) should be identical to PATIENT_RESULT.ORDER_OBSERVATION.OBR-8 (Observation End Date/Time)</Description>
                    <Assertion>
                        <IMPLY>
                            <Presence Path="9[*].1[1].17[1].2[1].1[1]" />
                            <PathValue Path1="9[*].1[1].17[1].2[1].1[1]" Operator="EQ" Path2="2[1].8[1]" NotPresentBehavior="FAIL" Truncated="false" IdenticalEquality="true" Path1Mode="AtLeastOne" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
                <Constraint ID="SPM-11-Usage" Strength="SHOULD">
                    <Description>If PATIENT_RESULT.ORDER_OBSERVATION.OBR-31.1 (Identifier) contains the value 'PT', then at least one occurrence of PATIENT_RESULT.ORDER_OBSERVATION.SPECIMEN.SPM-11.1 (Identifier) should not be empty.</Description>
                    <Assertion>
                        <IMPLY>
                            <PlainText Path="2[1].31[1].1[1]" Text="PT" IgnoreCase="false" NotPresentBehavior="FAIL" />
                            <Format Path="9[*].1[1].11[*].1[1]" Regex="^(?!\s*$).+" AtLeastOnce="true" NotPresentBehavior="FAIL" />
                        </IMPLY>
                    </Assertion>
                </Constraint>
            </ByID>
        </Group>
        <Message />
    </Constraints>
</ConformanceContext>